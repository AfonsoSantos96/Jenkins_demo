language: cpp
compiler:
  	- clang
 	- gcc
dist:     trusty


matrix:
  include:
  #CLang
    # works on Trusty
    - os: linux
      addons:
        apt:
          sources:
            - llvm-toolchain-trusty-5.0
          packages:
            - clang-5.0
      env:
        - MATRIX_EVAL="CC=clang-5.0 && CXX=clang++-5.0"


before_install:
  - eval "${MATRIX_EVAL}"
	#C++17
  - sudo add-apt repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq

install:
  - sudo apt-get install -qq g++-6
  - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-6 90
  
  # cppcheck
  - sudo apt-get install -qq cppcheck

script:
  - g++ main.c -std=c++17 -o travis_gcc_cpp17
  - ./travis_gcc_cpp17
  
  # cppcheck
  - cppcheck --quiet --error-exitcode=1 .
